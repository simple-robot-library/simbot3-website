{"$schema":"http://json-schema.org/draft-07/schema","title":"Simbot中Mirai组件的bot配置文件架构","type":"object","properties":{"code":{"type":"integer","exclusiveMinimum":0,"description":"账号"},"password":{"type":["string","null"],"deprecationMessage":"请使用passwordInfo"},"passwordMD5":{"type":["string","null"],"deprecationMessage":"请使用passwordInfo"},"passwordMD5Bytes":{"type":["array","null"],"items":{"type":"integer"},"deprecationMessage":"请使用passwordInfo"},"passwordInfo":{"description":"密码配置","properties":{"type":{"type":"string","enum":["text","env_text","md5_text","md5_bytes","env_md5_text"]}},"anyOf":[{"type":"object","properties":{"type":{"const":"text"},"text":{"type":"string","description":"明文密码"}},"required":["text"]},{"type":"object","properties":{"type":{"const":"env_text"},"prop":{"type":["string","null"],"description":"明文密码虚拟机参数键"},"env":{"type":["string","null"],"description":"明文密码环境变量键"}}},{"type":"object","properties":{"type":{"const":"md5_text"},"md5":{"type":"string","description":"md5密码（字符串）"}},"required":["md5"]},{"type":"object","properties":{"type":{"const":"md5_bytes"},"md5":{"type":"array","items":{"type":"integer"},"description":"md5密码（字节组）"}},"required":["md5"]},{"type":"object","properties":{"type":{"const":"env_md5_text"},"prop":{"type":["string","null"],"description":"md5密码（字符串）虚拟机参数键"},"env":{"type":["string","null"],"description":"md5密码（字符串）环境变量键"}}}],"required":["type"]},"config":{"description":"各项配置信息","type":"object","properties":{"deviceInfoSeed":{"type":"integer","deprecationMessage":"请使用deviceInfo"},"workingDir":{"type":"string","description":"Mirai配置中的工作目录","default":"."},"heartbeatPeriodMillis":{"type":"integer","description":"连接心跳包周期.","default":60000},"statHeartbeatPeriodMillis":{"type":"integer","description":"状态心跳包周期","default":300000},"heartbeatTimeoutMillis":{"type":"integer","description":"每次心跳时等待结果的时间","default":5000},"heartbeatStrategy":{"type":"string","enum":["STAT_HB","REGISTER","NONE"],"description":"心跳策略","default":"STAT_HB"},"reconnectionRetryTimes":{"type":"integer","description":"最多尝试多少次重连","default":2147483647},"autoReconnectOnForceOffline":{"type":"boolean","description":"被挤下线时自动重连","default":false},"protocol":{"type":"string","enum":["ANDROID_PHONE","ANDROID_PAD","ANDROID_WATCH","IPAD","MACOS"],"description":"使用协议类型","default":"ANDROID_PHONE"},"highwayUploadCoroutineCount":{"type":"integer","description":"Highway 通道上传图片, 语音, 文件等资源时的协程数量。默认 CPU 核心数。"},"deviceInfoJson":{"type":"object","deprecationMessage":"请使用deviceInfo"},"simpleDeviceInfoJson":{"type":"object","deprecationMessage":"请使用deviceInfo"},"deviceInfoFile":{"type":"string","deprecationMessage":"请使用deviceInfo"},"deviceInfo":{"description":"设备信息配置","properties":{"type":{"type":"string","enum":["auto","simbot_random","random","resource","object","simple_object"],"default":"auto"}},"anyOf":[{"type":"object","properties":{"type":{"const":"auto","description":"自动配置设备信息"},"baseDir":{"type":["string","null"],"default":"","description":"寻找设备信息文件的基础目录"}}},{"type":"object","properties":{"type":{"const":"simbot_random","description":"simbot提供的随机设备信息"},"seed":{"type":"integer","default":1,"description":"随机种子"}}},{"type":"object","properties":{"type":{"const":"random"},"seed":{"type":["integer","null"],"description":"随机种子","default":null}}},{"type":"object","properties":{"type":{"const":"resource","description":"设备信息文件资源路径"},"paths":{"type":"array","items":{"type":"string","minLength":1},"minItems":1,"uniqueItems":true}},"required":["paths"]},{"type":"object","properties":{"type":{"const":"object","description":"使用deviceInfo的原始Json对象"},"object":{"type":"object","description":"deviceInfo原始Json对象","properties":{"display":{"type":"array","items":{"type":"number"}},"product":{"type":"array","items":{"type":"number"}},"device":{"type":"array","items":{"type":"number"}},"board":{"type":"array","items":{"type":"number"}},"brand":{"type":"array","items":{"type":"number"}},"model":{"type":"array","items":{"type":"number"}},"bootloader":{"type":"array","items":{"type":"number"}},"fingerprint":{"type":"array","items":{"type":"number"}},"bootId":{"type":"array","items":{"type":"number"}},"procVersion":{"type":"array","items":{"type":"number"}},"baseBand":{"type":"array","items":{"type":"number"}},"version":{"type":"object","properties":{"incremental":{"type":"array","items":{"type":"number"}},"release":{"type":"array","items":{"type":"number"}},"codename":{"type":"array","items":{"type":"number"}},"sdk":{"type":"number"}}},"simInfo":{"type":"array","items":{"type":"number"}},"osType":{"type":"array","items":{"type":"number"}},"macAddress":{"type":"array","items":{"type":"number"}},"wifiBSSID":{"type":"array","items":{"type":"number"}},"wifiSSID":{"type":"array","items":{"type":"number"}},"imsiMd5":{"type":"array","items":{"type":"number"}},"imei":{"type":"string"},"apn":{"type":"array","items":{"type":"number"}}},"required":["display","product","device","board","brand","model","bootloader","fingerprint","bootId","procVersion","baseBand","version","simInfo","osType","macAddress","wifiBSSID","wifiSSID","imsiMd5","imei","apn"]}},"required":["object"]},{"type":"object","properties":{"type":{"const":"simple_object","description":"使用simpleDeviceInfo的原始Json对象"},"object":{"type":"object","description":"simpleDeviceInfo的原始Json对象","properties":{"display":{"type":"string"},"product":{"type":"string"},"device":{"type":"string"},"board":{"type":"string"},"brand":{"type":"string"},"model":{"type":"string"},"bootloader":{"type":"string"},"fingerprint":{"type":"string"},"bootId":{"type":"string"},"procVersion":{"type":"string"},"baseBand":{"type":"string"},"version":{"type":"object","properties":{"incremental":{"type":"string"},"release":{"type":"string"},"codename":{"type":"string"},"sdk":{"type":"number"}}},"simInfo":{"type":"string"},"osType":{"type":"string"},"macAddress":{"type":"string"},"wifiBSSID":{"type":"string"},"wifiSSID":{"type":"string"},"imsiMd5":{"type":"string"},"imei":{"type":"string"},"apn":{"type":"string"}},"required":["display","product","device","board","brand","model","bootloader","fingerprint","bootId","procVersion","baseBand","version","simInfo","osType","macAddress","wifiBSSID","wifiSSID","imsiMd5","imei","apn"]}},"required":["object"]}],"required":["type"]},"noNetworkLog":{"type":"boolean","description":"是否不输出网络日志","default":true},"noBotLog":{"type":"boolean","description":"是否不输出Bot日志","default":true},"isShowingVerboseEventLog":{"type":"boolean","description":"是否显示过于冗长的事件日志","default":false},"cacheDir":{"type":"string"},"contactListCache":{"type":"object","description":"联系人列表缓存配置","properties":{"saveIntervalMillis":{"type":"integer","description":"在有修改时自动保存间隔","default":60000},"friendListCacheEnabled":{"type":"boolean","description":"开启好友列表缓存","default":false},"groupMemberListCacheEnabled":{"type":"boolean","description":"开启群成员列表缓存","default":false}}},"loginCacheEnabled":{"type":"boolean","description":"是否开启登录缓存","default":true},"convertLineSeparator":{"type":"boolean","description":"是否处理接受到的特殊换行符","default":true},"recallMessageCacheStrategy":{"type":"string","enum":["INVALID","MEMORY_LRU"],"description":"消息撤回缓存策略","default":"INVALID"}}}},"required":["code","passwordInfo"],"definitions":{}}
